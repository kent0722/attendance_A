<% provide(:title, "attendance_log") %>

<h1 class="user-title">勤怠ログ</h1>

<%= form_with(url: attendance_log_user_path, local: true, method: :get, class: "form-inline") do |f| %>
  <%= f.submit "リセット", class: "btn btn-default" %>
  <%= f.submit "検索", class: "btn btn-primary" %>
  <!-- 年と月のセレクトボックスを追加 -->
  <div>
    <%= f.select :year, (Date.current.year - 5)..Date.current.year, { prompt: '年' }, { class: "form-control" } %>
  </div>
  <div>
    <%= f.select :month, options_for_select((1..12).map { |m| [m, m] }), { prompt: '月' }, { class: "form-control" } %>
  </div>
<% end %>



<table class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
      <td>日付</td>
      <td>変更前出社時間</td>
      <td>変更前退社時間</td>
      <td>変更後出社</td>
      <td>変更後退社</td>
      <td>指示者</td>
      <td>承認日</td>
    </tr>
  </thead>

  <tbody>
    <% @attendances.each do |day| %>
      <tr>
        <td><%= day.worked_on %></td>
        <td><%= l(day.b4_started_at, format: :time) if day.b4_started_at.present? %></td>
        <td><%= l(day.b4_finished_at, format: :time) if day.b4_finished_at.present? %></td>
        <td><%= l(day.started_at, format: :time) if day.started_at.present? %></td>
        <td><%= l(day.finished_at, format: :time) if day.finished_at.present? %></td>
        <td><%= day.aprv_sup %></td>
        <td><%= day.aprv_day %></td>
      </tr>
    <% end %>
  </tbody>

</table>
{"filter":false,"title":"attendances_helper.rb","tooltip":"/attendance_app/app/helpers/attendances_helper.rb","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":24},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":1,"column":0},"end":{"row":1,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["module AttendancesHelper","  ","end",""],"id":8},{"start":{"row":0,"column":0},"end":{"row":16,"column":3},"action":"insert","lines":["module AttendancesHelper","","  def attendance_state(attendance)","    # 受け取ったAttendanceオブジェクトが当日と一致するか評価します。","    if Date.current == attendance.worked_on","      return '出勤' if attendance.started_at.nil?","      return '退勤' if attendance.started_at.present? && attendance.finished_at.nil?","    end","    # どれにも当てはまらなかった場合はfalseを返します。","    return false","  end","","  # 出勤時間と退勤時間を受け取り、在社時間を計算して返します。","  def working_times(start, finish)","    format(\"%.2f\", (((finish - start) / 60) / 60.0))","  end","end"]}],[{"start":{"row":2,"column":0},"end":{"row":10,"column":5},"action":"remove","lines":["  def attendance_state(attendance)","    # 受け取ったAttendanceオブジェクトが当日と一致するか評価します。","    if Date.current == attendance.worked_on","      return '出勤' if attendance.started_at.nil?","      return '退勤' if attendance.started_at.present? && attendance.finished_at.nil?","    end","    # どれにも当てはまらなかった場合はfalseを返します。","    return false","  end"],"id":9},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"remove","lines":["",""]},{"start":{"row":0,"column":24},"end":{"row":1,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":3,"column":2},"end":{"row":5,"column":5},"action":"remove","lines":["def working_times(start, finish)","    format(\"%.2f\", (((finish - start) / 60) / 60.0))","  end"],"id":10},{"start":{"row":3,"column":2},"end":{"row":6,"column":3},"action":"insert","lines":["def working_times(start, finish)","  hours_worked = (finish - start) / 3600.0 # 秒数を時間に変換","  format(\"%.2f\", hours_worked)","end"]}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":2},"action":"insert","lines":["  "],"id":12},{"start":{"row":5,"column":0},"end":{"row":5,"column":2},"action":"insert","lines":["  "]},{"start":{"row":6,"column":0},"end":{"row":6,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":4,"column":4},"end":{"row":5,"column":32},"action":"remove","lines":["hours_worked = (finish - start) / 3600.0 # 秒数を時間に変換","    format(\"%.2f\", hours_worked)"],"id":14},{"start":{"row":4,"column":4},"end":{"row":5,"column":32},"action":"insert","lines":["hours_worked = (finish - start) / 3600.0 # 秒数を時間に変換","    format(\"%.2f\", hours_worked)"]}],[{"start":{"row":8,"column":2},"end":{"row":12,"column":5},"action":"insert","lines":["# 時間表示を15分単位にする","  def calc_round_time(t)","    rounded_t = Time.local(t.year, t.month, t.day, t.hour, t.min/15*15)","    return rounded_t","  end"],"id":16}],[{"start":{"row":6,"column":5},"end":{"row":7,"column":0},"action":"insert","lines":["",""],"id":15},{"start":{"row":7,"column":0},"end":{"row":7,"column":2},"action":"insert","lines":["  "]},{"start":{"row":7,"column":2},"end":{"row":8,"column":0},"action":"insert","lines":["",""]},{"start":{"row":8,"column":0},"end":{"row":8,"column":2},"action":"insert","lines":["  "]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":3},"end":{"row":7,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1694172561853,"hash":"6db3672a0ee8bb7f15f9e5ab2f48dc79708ade3c"}